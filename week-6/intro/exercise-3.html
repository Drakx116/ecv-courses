<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title> Exercise 3 </title>
</head>
<body>

<script>

  // Functions

  const getSize = () => {
    let size = 0;
    let error = 1;

    while (error) {
      error = 0;

      size = window.prompt('Veuillez saisir la taille du tableau à remplir.');

      if (!size.match(new RegExp("[0-9]"))) {
        alert('Format incorrect. Veuillez rentrer un nombre (entre 3 et 10).');
        error++; continue;
      }

      if (size < 4) {
        alert('Nombre trop petit. La taille du tableau ne peut pas être inférieure à 3.'); error++;
      }

      if (size > 10) {
        alert('Nombre trop grand. La taille du tableau ne peut pas être supérieur à 10.'); error++;
      }
    }

    return size;
  };

  const getNumberPopulatedArray = size => {
        let tab = [];
        for (let i = 0; i < size; i++) {
            const newNumber = getNewPromptUserNumber(size - i);

            if (!newNumber) { // Stop filling the array if the user prompt equals 0
              return tab;
            }

            tab.push(newNumber);
        }

        return tab;
    }

  const getNewPromptUserNumber = left => {
        let number = undefined;
        let error = 1;

        while (error) {
          error = 0;

          number = window.prompt('Veuillez saisir un nombre (encore ' + left + ').');

          if (!number.match(new RegExp("[0-9]"))) {
            alert('Format incorrect. Veuillez rentrer un nombre.');
            error++;
          }
        }

        return parseInt(number);
    }

  const getArrayMaxValue = array => {
    const max = {'key': 0, 'value': 0 };

    array.forEach((number, key) => {
      if (number > max.value) {
        max.key = key;
        max.value = number;
      }
    });

    return max;
  }

  const displayResult = max => {
    alert('La valeur maximale du tableau est ' + max.value + ' et se trouve à la position ' + (max.key + 1) + '.');
  }



  // Logic

  const size = getSize();
  const numbers = getNumberPopulatedArray(size);
  const max = getArrayMaxValue(numbers);

  displayResult(max);

</script>
</body>
</html>
